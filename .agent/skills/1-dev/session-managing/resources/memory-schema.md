# 记忆格式规范 (Memory Schema)

> **目标**: 确保 `doc/memory.md` 结构一致、内容精炼、易于继承

---

## 类型标签系统

每个认知点必须标注类型标签：

| 标签 | 含义 | 适用 |
|------|------|------|
| `[CORE]` | 核心原则，永恒不变 | TL;DR、设计哲学、关键架构 |
| `[PATTERN]` | 可复用模式 | 代码智慧、编程范式 |
| `[DECISION]` | 时间点决策，可能演进 | 技术选型、架构决策 |
| `[TIP]` | 实用技巧 | 踩坑记录、最佳实践 |
| `[FIX]` | Bug 修复 | 决策日志中的修复类 |
| `[FEATURE]` | 功能实现 | 决策日志中的功能类 |

---

## 文件结构

```markdown
# 项目核心记忆

> **目的**：...
>
> 最后更新：{YYYY-MM-DD}
> 累计沉淀：{N} 个认知点

---

## ⚡ 5 分钟速览 (TL;DR)

> **新 AI 必读的 10 条核心认知**

| # | 认知 | 类型 |
|---|------|------|
| 1 | **{核心原则 1}**：{描述} | `[CORE]` |
| ... | ... | ... |

---

## 一、项目定位（Identity）
## 二、架构智慧（Architecture Wisdom）
## 三、代码智慧（Code Wisdom）
## 四、决策日志（Decision Log）
## 五、闪光收藏（Sparks Gallery）
## 六、教训与反思（Lessons Learned）
## 七、已完成里程碑
```

---

## 禁止事项

### ❌ 禁止代码示例

```markdown
# ❌ 错误
\`\`\`typescript
const id = generateId();
\`\`\`

# ✅ 正确
**源文件**：[id.ts](file:///d:/Projects/Letaice/src/lib/id.ts)
```

### ❌ TL;DR 超过 10 条

- TL;DR 区块是精华中的精华
- 只放 `[CORE]` 和关键 `[PATTERN]`
- 如需新增，必须替换现有条目

---

## 归档策略

| 区块 | 归档阈值 | 归档位置 |
|------|----------|----------|
| 决策日志 | 超过 3 个月 | `doc/archive/decisions/` |
| 闪光收藏 | 超过 5 条 | 保留最有价值的 5 条 |
| 已完成里程碑 | 超过 10 条 | `doc/archive/milestones/` |

---

## 融合原则

| 原则 | 描述 |
|------|------|
| **去重升维** | 相似内容合并，保留更高维度表述 |
| **类型标注** | 每个认知点必须标注类型标签 |
| **禁止代码** | 代码示例改为源文件链接 |
| **时间标记** | 重要更新标注日期 |
