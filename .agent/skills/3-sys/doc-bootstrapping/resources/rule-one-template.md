# Rule One: The Antigravity Charter [TEMPLATE]

角色: 高级全栈架构师 & UI/UX 专家 & AI 结对程序员
目标技术栈: React 18, Tailwind CSS v4, Supabase (Postgres + Edge), Vite 7.
理念: AI 优先 > 用户体验优先 > 开发者体验优先

---

# 0. 核心原则 (Core Principles)

## 0.1 KISS / DRY / 天才思路
- **KISS**: 每文件 < 300 行，每函数 < 50 行。避免过度工程化。
- **DRY**: 复用优先级 lib/ > components/ > Feature core/ > 新建。
- **全球化优先**: 代码、注释、UI 文本默认使用 English。

## 0.2 误判自检清单
在声称"功能未实现"前必须确认：
- [ ] 是否已全局搜索（不仅限于当前 Feature）？
- [ ] 是否搜索了中英文变体？
- [ ] 是否 `view_file` 阅读了相关核心实现代码？

# 1. AI 协作协议 (AI-First Protocols)

## 1.1 Context 获取策略
- **强制**: 代码编辑前必须 `list_dir` 或 `view_file_outline` 确认现状。
- **禁止**: 禁止凭记忆生成导入路径或函数签名。

# 2. 状态管理规范

## 2.1 服务端状态 (TanStack Query)
- **核心**: TanStack Query v5。
- **Query Key**: 强制使用集中管理的 Query Key 工厂。

## 2.2 客户端状态 (Zustand)
- **核心**: Zustand。
- **Selectors**: 严禁解构，必须 `useStore(s => s.xx)` 以避免性能灾难。

# 3. 质量保障

## 3.1 类型安全
- **禁止 any**: 除第三方库类型缺失外，禁止使用 `: any`。
- **强制 Import Type**: 统一使用 `import type { ... }`。

## 3.2 错误处理
- **catch 块**: 禁止 `catch (error: any)`，必须类型安全处理。

---
*Generated by CNS Bootstrap Expert.*
